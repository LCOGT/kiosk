(function(e){function t(t){for(var r,o,i=t[0],c=t[1],l=t[2],p=0,m=[];p<i.length;p++)o=i[p],Object.prototype.hasOwnProperty.call(a,o)&&a[o]&&m.push(a[o][0]),a[o]=0;for(r in c)Object.prototype.hasOwnProperty.call(c,r)&&(e[r]=c[r]);u&&u(t);while(m.length)m.shift()();return n.push.apply(n,l||[]),s()}function s(){for(var e,t=0;t<n.length;t++){for(var s=n[t],r=!0,i=1;i<s.length;i++){var c=s[i];0!==a[c]&&(r=!1)}r&&(n.splice(t--,1),e=o(o.s=s[0]))}return e}var r={},a={app:0},n=[];function o(t){if(r[t])return r[t].exports;var s=r[t]={i:t,l:!1,exports:{}};return e[t].call(s.exports,s,s.exports,o),s.l=!0,s.exports}o.m=e,o.c=r,o.d=function(e,t,s){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:s})},o.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var s=Object.create(null);if(o.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)o.d(s,r,function(t){return e[t]}.bind(null,r));return s},o.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="/kiosk/";var i=window["webpackJsonp"]=window["webpackJsonp"]||[],c=i.push.bind(i);i.push=t,i=i.slice();for(var l=0;l<i.length;l++)t(i[l]);var u=c;n.push([0,"chunk-vendors"]),s()})({0:function(e,t,s){e.exports=s("56d7")},"034f":function(e,t,s){"use strict";var r=s("85ec"),a=s.n(r);a.a},"267b":function(e,t,s){"use strict";var r=s("a287"),a=s.n(r);a.a},"3c4e":function(e,t,s){},"56d7":function(e,t,s){"use strict";s.r(t);s("e260"),s("e6cf"),s("cca6"),s("a79d");var r=s("2b0e"),a=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"container",attrs:{id:"app"}},[e._m(0),s("login-form",{attrs:{loggedin:e.loggedin},on:{"login:user":e.login,"logout:user":e.logout}}),s("div",{staticClass:"columns"},[s("div",{staticClass:"column is-half"},[s("select-form",{attrs:{mode:e.mode,loggedin:e.loggedin,message:e.message},on:{changemode:e.changeMode}}),s("observation-form",{attrs:{mode:e.mode,proposals:e.proposals,loggedin:e.loggedin,message:e.message,token:e.token},on:{changemode:e.changeMode,changemessage:e.changeMessage,getobservations:e.getObservations}})],1),s("div",{staticClass:"column is-half"},[s("observation-table",{attrs:{observations:e.observations,proposals:e.proposals,loggedin:e.loggedin,next_obs:e.next_obs,prev_obs:e.prev_obs},on:{"delete:observation":e.deleteObservation,getobservations:e.getObservations}})],1)])],1)},n=[function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"is-size-4",attrs:{id:"header"}},[r("h1",{staticClass:"title"},[e._v("Kiosk")]),r("img",{attrs:{src:s("e9fe"),align:"right"}})])}],o=(s("d3b7"),s("96cf"),function(){var e=this,t=e.$createElement,s=e._self._c||t;return e.loggedin?s("div",{attrs:{id:"observation-table"}},[s("h1",{staticClass:"is-size-2"},[e._v("Past Observations")]),!1===e.gettingimg&&e.image.url?s("div",[s("img",{attrs:{src:e.image.url,alt:e.image.name}})]):!0===e.gettingimg?s("div",[e._m(0)]):e._e(),e.observations.length<1?s("p",{staticClass:"empty-table"},[e._v(" No observations ")]):s("table",{staticClass:"table is-fullwidth"},[e._m(1),s("tbody",e._l(e.observations,(function(t){return s("tr",{key:t.id},[s("td",[s("a",{attrs:{href:"https://observe.lco.global/requestgroups/"+t.id}},[e._v(e._s(t.requests[0].configurations[0].target.name))])]),s("td",{attrs:{title:t.state}},[s("i",{staticClass:"far",class:e.statusIcon(t.state)})]),"PENDING"==t.state?s("td",[s("button",{staticClass:"button is-warning",on:{click:function(s){return e.$emit("delete:observation",t.id)}}},[e._v("Cancel")])]):"COMPLETED"==t.state?s("td",[s("button",{staticClass:"button is-info",on:{click:function(s){return e.getframeid(t.requests[0].id)}}},[e._v("Get Image")])]):s("td")])})),0)]),s("div",{staticClass:"field is-grouped"},[e.prev_obs?s("p",{staticClass:"control"},[s("button",{staticClass:"button",on:{click:function(t){return e.$emit("getobservations",!1,!0)}}},[e._m(2),s("span",[e._v("Previous")])])]):e._e(),e.next_obs?s("p",{staticClass:"control"},[s("button",{staticClass:"button",on:{click:function(t){return e.$emit("getobservations",!0,!1)}}},[s("span",[e._v("Next")]),e._m(3)])]):e._e()])]):e._e()}),i=[function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"fa-3x"},[s("i",{staticClass:"fas fa-spinner fa-spin"})])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("thead",[s("tr",[s("th",[e._v("Target")]),s("th",[e._v("Status")]),s("th",[e._v("Actions")])])])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("span",{staticClass:"icon is-small"},[s("i",{staticClass:"far fa-backward"})])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("span",{staticClass:"icon is-small"},[s("i",{staticClass:"far fa-forward"})])}],c=(s("b0c0"),{name:"observation-table",props:{observations:Array,loggedin:Boolean,next_obs:String,prev_obs:String},data:function(){return{gettingimg:null,image:{url:"",name:""}}},methods:{statusIcon:function(e){var t={COMPLETED:"fa-check",FAILED:"fa-times",WINDOW_EXPIRED:"fa-times",PENDING:"fa-clock",CANCELED:"fa-ban"};return t[e]},getframeid:function(e){var t,s;return regeneratorRuntime.async((function(r){while(1)switch(r.prev=r.next){case 0:return this.gettingimg=!0,r.prev=1,r.next=4,regeneratorRuntime.awrap(fetch("https://archive-api.lco.global/frames/?ordering=-id&limit=1&REQNUM=".concat(e)));case 4:return s=r.sent,r.next=7,regeneratorRuntime.awrap(s.json());case 7:if(t=r.sent,console.log(t),!(void 0!=t.results&&t.results.length>0)){r.next=17;break}return r.next=12,regeneratorRuntime.awrap(this.getThumbnail(t.results[0].id));case 12:return t=r.sent,this.gettingimg=!1,this.image.name=e,this.image.url=t["url"],r.abrupt("return");case 17:r.next=23;break;case 19:return r.prev=19,r.t0=r["catch"](1),console.error(r.t0),r.abrupt("return","0");case 23:case"end":return r.stop()}}),null,this,[[1,19]])},getThumbnail:function(e){var t,s;return regeneratorRuntime.async((function(r){while(1)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,regeneratorRuntime.awrap(fetch("https://thumbnails.lco.global/".concat(e,"/?height=600&width=600&color=true")));case 3:return s=r.sent,r.next=6,regeneratorRuntime.awrap(s.json());case 6:return t=r.sent,r.abrupt("return",t);case 10:r.prev=10,r.t0=r["catch"](0),console.error(r.t0);case 13:case"end":return r.stop()}}),null,null,[[0,10]])}}}),l=c,u=(s("da76"),s("2877")),p=Object(u["a"])(l,o,i,!1,null,"1c31a29c",null),m=p.exports,d=function(){var e=this,t=e.$createElement,s=e._self._c||t;return e.loggedin?s("div",{attrs:{id:"observation-form"}},[s("div",{staticClass:"field"},[s("label",{staticClass:"label"},[e._v("Project Name: "+e._s(e.proposalName))]),s("div",{directives:[{name:"show",rawName:"v-show",value:!e.proposalName,expression:"!proposalName"}],staticClass:"control"},[s("div",{staticClass:"select"},[s("select",{directives:[{name:"model",rawName:"v-model",value:e.observation.proposal,expression:"observation.proposal"}],on:{change:function(t){var s=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.$set(e.observation,"proposal",t.target.multiple?s:s[0])}}},[s("option",{attrs:{disabled:"",value:""}},[e._v("Select your project")]),e._l(e.proposals,(function(t){return s("option",{key:t.id,domProps:{value:t.value}},[e._v(" "+e._s(t.text)+" ")])}))],2)])])]),s("div",{directives:[{name:"show",rawName:"v-show",value:"select"===e.mode,expression:"mode === 'select'"}],attrs:{id:"select-form"}},[s("p",{staticClass:"is-size-4"},[e._v("Select a type of target?")]),s("div",{staticClass:"level"},e._l(e.object_types,(function(t){return s("div",{staticClass:"level-item"},[s("button",{staticClass:"button",on:{click:function(s){return e.whatsupObjects(t.avm)}}},[e._v(e._s(t.name))])])})),0),"planet"===e.object_type?s("div",[s("p",[e._v("Select a planet")]),s("div",{staticClass:"buttons"},e._l(e.planets,(function(t){return s("div",[s("button",{staticClass:"button is-capitalized",on:{click:function(s){return e.lookUp(e.name=t)}}},[e._v(e._s(t))])])})),0)]):e._e()]),s("div",{staticClass:"columns is-multiline"},e._l(e.objects,(function(t){return s("div",{staticClass:"column is-one-third"},[s("div",{staticClass:"box"},[s("article",{staticClass:"media"},[s("div",{staticClass:"media-content"},[s("div",{staticClass:"content"},[s("p",{staticClass:"block-with-text"},[s("a",{staticClass:"is-size-5",on:{click:function(s){return e.selectObject(t)}}},[e._v(e._s(t.name))]),s("br"),e._v(" "+e._s(t.desc)+" ")])])])])])])})),0),s("div",{directives:[{name:"show",rawName:"v-show",value:"manual"===e.mode,expression:"mode === 'manual'"}]},[s("label",{staticClass:"label"},[e._v("Target name")]),s("div",{staticClass:"field has-addons"},[s("div",{staticClass:"control"},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.object_name,expression:"object_name"}],ref:"first",staticClass:"input",class:{"has-error":e.submitting},attrs:{type:"text"},domProps:{value:e.object_name},on:{focus:e.clearStatus,input:function(t){t.target.composing||(e.object_name=t.target.value)}}})]),s("div",{staticClass:"control"},[s("a",{staticClass:"button is-info",on:{click:e.lookUp}},[e._v(" Search ")])])])]),e.error?s("p",{staticClass:"error-message"},[s("i",{staticClass:"fad fa-exclamation-triangle"}),e._v(e._s(e.error))]):e._e(),e.observation.name?s("div",{attrs:{id:"object-info"}},[s("h3",{staticClass:"is-size-4 success-message"},[s("i",{staticClass:"fa fa-check"}),e._v(" "+e._s(e.observation.name)+" selected")])]):e._e(),e.lookedup?s("p",{staticClass:"success-message"},[s("i",{class:e.targetIcon}),e._v(" "+e._s(e.lookupmsg)),s("br")]):e._e(),!e.submitting||e.error||e.errorMsg?e._e():s("p",{staticClass:"pending-message"},[s("i",{staticClass:"fas fa-spinner fa-spin"}),e._v(" Sending to scheduler")]),e.errorMsg&&e.submitted?s("p",{staticClass:"error-message"},[s("i",{staticClass:"fad fa-exclamation-triangle"}),e._v(e._s(e.errorMsg))]):e._e(),e.success?s("p",{staticClass:"success-message"},[s("i",{staticClass:"fa fa-check"}),e._v(" Observation successfully submitted")]):e._e(),s("div",{staticClass:"field is-grouped"},[s("p",{staticClass:"control"},[s("button",{staticClass:"button  is-primary",on:{click:e.handleSubmit}},[e._v("Submit")])]),s("p",{staticClass:"control"},[s("button",{staticClass:"button  is-secondary",on:{click:e.reset}},[e._v("Reset")])])])]):e._e()},g=[];s("99af"),s("caad"),s("fb6a"),s("2532"),s("4de4");function h(e){var t;if("sidereal"==e.type)t={type:"ICRS",name:e["name"],ra:e.coords["ra"],dec:e.coords["dec"],epoch:2e3};else{var s=e.coords["epoch_jd"]-2400000.5;t={type:"ORBITAL_ELEMENTS",name:e["name"],epochofel:s,scheme:"JPL_MAJOR_PLANET",orbinc:e.coords["inclination"],longascnode:e.coords["ascending_node"],argofperih:e.coords["argument_of_perihelion"],meandist:e.coords["semimajor_axis"],eccentricity:e.coords["eccentricity"],meananom:e.coords["mean_anomaly"],dailymot:e.coords["mean_daily_motion"]}}return t}function v(e){var t=Array();if(e.coords.filters){for(var s=0;s<e.coords.filters.length;s++)t.push({filter:e.coords.filters[s].name,exposure:e.coords.filters[s].exposure});return t}var r={jupiter:{filter:"up",exposure:.2},mars:{filter:"rp",exposure:5},uranus:{filter:"rp",exposure:5},neptune:{filter:"rp",exposure:5},mercury:{filter:"rp",exposure:5},saturn:{filter:"up",exposure:.5},venus:{filter:"up",exposure:.1}};if("ngc"==e.name.toLowerCase().substring(0,3))t=[{filter:"rp",exposure:120},{filter:"B",exposure:120},{filter:"V",exposure:120}];else if("non_sidereal"==e.type)try{t=[r[e.name.toLowerCase()]]}catch(a){t=[{filter:"u",exposure:.1}]}else"m"==e.name.toLowerCase().substring(0,1)&&(t=[{filter:"rp",exposure:90},{filter:"B",exposure:90},{filter:"V",exposure:90}]);return t}function f(e){for(var t=h(e),s=v(e),r=b(),a=a={max_airmass:1.6,min_lunar_distance:30},n=Array(),o=0;o<s.length;o++){var i={exposure_time:s[o]["exposure"],exposure_count:1,optical_elements:{filter:s[o]["filter"]}};n.push(i)}var c=[{type:"EXPOSE",instrument_type:"0M4-SCICAM-SBIG",target:t,constraints:a,acquisition_config:{},guiding_config:{},instrument_configs:n}],l={start:r.start,end:r.end},u={location:{telescope_class:"0m4"},constraints:{max_airmass:2},target:t,configurations:c,windows:[l],observation_note:"Serol",type:"request"},p={name:"kiosk-"+e.name,proposal:e.proposal,ipp_value:1.05,operator:"SINGLE",observation_type:"NORMAL",requests:[u]};return p}function b(){var e=new Date,t=new Date;return e=e.toISOString().substring(0,19),t.setDate(t.getDate()+7),t=t.toISOString().substring(0,19),{start:e,end:t}}var _={name:"observation-form",props:{proposals:Array,loggedin:Boolean,obs:Object,message:String,mode:String,token:String},data:function(){return{submitted:!1,submitting:!1,observation:{name:"",coords:"",proposal:"",type:""},object_name:"",object_types:[{name:"Planet",avm:"1.1"},{name:"Galaxy",avm:"5"},{name:"Star Cluster",avm:"3.6.4"},{name:"Nebula",avm:"4"}],object_type:"",objects:[],error:"",success:!1,lookedup:!1,lookupmsg:"",planets:["mercury","mars","venus","uranus","jupiter","neptune","saturn"]}},computed:{errorMsg:function(){return this.message},proposalName:function(){for(var e=0;e<this.proposals.length;e++)if(this.proposals[e].value==this.observation.proposal)return this.error="",this.proposals[e].text},targetIcon:function(){var e={planet:"fas fa-planet-ringed",5:"fas fa-galaxy",4:"fad fa-smoke","3.6.4":"fas fa-stars"};return e[this.object_type]}},methods:{reset:function(){this.clearStatus(),this.$emit("changemode","start")},lookUp:function(){var e,t,s,r,a,n,o,i,c,l=arguments;return regeneratorRuntime.async((function(u){while(1)switch(u.prev=u.next){case 0:if(e=l.length>0&&void 0!==l[0]?l[0]:"",this.object_name?(this.observation.name=this.object_name,this.object_name=""):e&&(this.observation.name=e),t="sidereal",s=!1,u.prev=4,!this.planets.includes(this.observation.name.toLowerCase())){u.next=9;break}t="non_sidereal",u.next=15;break;case 9:return u.next=11,regeneratorRuntime.awrap(fetch("https://whatsup.lco.global/target/?name=".concat(this.observation.name,"&aperture=0m4")));case 11:return a=u.sent,u.next=14,regeneratorRuntime.awrap(a.json());case 14:r=u.sent;case 15:if(void 0!=r&&0!=r.target.length){u.next=24;break}return u.next=18,regeneratorRuntime.awrap(fetch("https://simbad2k.lco.global/"+this.observation.name+"?target_type="+t));case 18:return n=u.sent,u.next=21,regeneratorRuntime.awrap(n.json());case 21:r=u.sent,u.next=25;break;case 24:s=!0;case 25:r&&(r.error?this.error=r.error:(s?(o=r.target.ra,i=r.target.dec,c=r.target.filters,this.lookupmsg=r.target.desc):(o=r.ra_d,i=r.dec_d,c=[],this.lookupmsg="Coordinates found"),this.observation.coords="non_sidereal"==t?r:{ra:o,dec:i,filters:c},this.observation.type=t,this.lookedup=!0)),u.next=31;break;case 28:u.prev=28,u.t0=u["catch"](4),this.error=u.t0.response;case 31:case"end":return u.stop()}}),null,this,[[4,28]])},handleSubmit:function(){var e,t=this;return regeneratorRuntime.async((function(s){while(1)switch(s.prev=s.next){case 0:if(this.submitting=!0,this.submitted=!0,this.observation.name){s.next=6;break}return this.submitting=!1,this.error="You must type a valid object name",s.abrupt("return");case 6:if(this.observation.proposal){s.next=10;break}return this.submitting=!1,this.error="Please select your project",s.abrupt("return");case 10:return e=f(this.observation),s.next=13,regeneratorRuntime.awrap(this.addObservation(e).then((function(e){e&&(t.clearStatus(),t.$emit("changemode","start"),t.success=!0,t.$emit("getobservations")),t.submitting=!1})));case 13:case"end":return s.stop()}}),null,this)},addObservation:function(e){var t,s,r,a,n,o;return regeneratorRuntime.async((function(i){while(1)switch(i.prev=i.next){case 0:return this.error="",i.prev=1,t={method:"POST",data:e,headers:{Authorization:"Token "+this.token},dataType:"json",contentType:"application/json"},i.next=5,regeneratorRuntime.awrap(this.$http("https://observe.lco.global/api/requestgroups/",t));case 5:if(s=i.sent,200!=s.status&&201!=s.status){i.next=13;break}return i.next=9,regeneratorRuntime.awrap(s.data);case 9:return r=i.sent,i.abrupt("return",r);case 13:return this.error=s,i.abrupt("return",!1);case 15:i.next=25;break;case 17:return i.prev=17,i.t0=i["catch"](1),i.next=21,regeneratorRuntime.awrap(i.t0);case 21:if(console.log(i.t0),a=i.t0.response.data.requests,a){for(n="There was a problem submitting this request",o=0;o<a.length;o++)a[o].non_field_errors&&(n=a[o]["non_field_errors"][0]);this.error=n}else this.error="There was a problem submitting this request";return i.abrupt("return",!1);case 25:case"end":return i.stop()}}),null,this,[[1,17]])},clearStatus:function(){this.success=!1,this.lookedup=!1,this.lookupmsg="",this.submitting=!1,this.error="",this.errorSubmit="",this.objects=[],this.object_type=null,this.submitted=!1,this.observation.name="",this.observation.desc="",this.$emit("changemessage","")},whatsupObjects:function(e){var t,s,r,a,n,o,i,c;return regeneratorRuntime.async((function(l){while(1)switch(l.prev=l.next){case 0:if(this.clearStatus(),"1.1"!=e){l.next=7;break}return this.object_type="planet",this.objects=null,l.abrupt("return");case 7:this.object_type=e;case 8:return t=new Date,s=new Date,r=t.toISOString().substring(0,19),s.setDate(s.getDate()+7),a=s.toISOString().substring(0,19),n={method:"GET",headers:{"Content-Type":"application/json"}},o="https://whatsup.lco.global/range/?start=".concat(r,"&aperture=0m4&end=").concat(a,"&category=").concat(e,"&format=json"),l.next=17,regeneratorRuntime.awrap(fetch(o,n));case 17:return i=l.sent,l.next=20,regeneratorRuntime.awrap(i.json());case 20:c=l.sent,this.objects=c.targets.slice(0,8);case 22:case"end":return l.stop()}}),null,this)},selectObject:function(e){this.error="",this.objects=[],this.observation.type="sidereal",this.observation.name=e.name,this.lookupmsg=e.desc,this.lookedup=!0,this.observation.coords={ra:e.ra,dec:e.dec}}}},x=_,w=(s("a832"),Object(u["a"])(x,d,g,!1,null,"06edc6aa",null)),C=w.exports,y=function(){var e=this,t=e.$createElement,s=e._self._c||t;return 0==e.loggedin?s("div",{attrs:{id:"login-form"}},[s("form",{on:{submit:function(t){return t.preventDefault(),e.handleSubmit(t)}}},[s("label",{staticClass:"label"},[e._v("Username")]),s("input",{directives:[{name:"model",rawName:"v-model",value:e.username,expression:"username"}],ref:"first",staticClass:"input",class:{"has-error":e.submitting&&e.invalidUsername},attrs:{type:"text"},domProps:{value:e.username},on:{input:function(t){t.target.composing||(e.username=t.target.value)}}}),s("label",{staticClass:"label"},[e._v("Password")]),s("input",{directives:[{name:"model",rawName:"v-model",value:e.password,expression:"password"}],staticClass:"input",class:{"has-error":e.submitting&&e.invalidPassword},attrs:{type:"password"},domProps:{value:e.password},on:{input:function(t){t.target.composing||(e.password=t.target.value)}}}),e.error&&e.submitting?s("p",{staticClass:"error-message"},[e._v("❗Please fill out all required fields")]):e._e(),e.success?s("p",{staticClass:"success-message"},[e._v("✅ Log in successful")]):e._e(),s("button",{staticClass:"button"},[e._v("Login")])])]):e._e()},k=[],j={name:"login-form",props:{loggedin:Boolean},data:function(){return{username:"",password:"",submitting:!1,loading:!1,success:!1,error:""}},created:function(){this.$emit("logout:user")},computed:{invalidPassword:function(){return""===this.password},invalidUsername:function(){return""===this.username}},methods:{handleSubmit:function(){this.submitting=!0;var e=this.username,t=this.password;e&&t&&(this.loading=!0,this.$emit("login:user",e,t))}}},S=j,O=(s("267b"),Object(u["a"])(S,y,k,!1,null,"441c9b16",null)),R=O.exports,P=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{directives:[{name:"show",rawName:"v-show",value:"start"==e.mode,expression:"mode =='start'"}],staticClass:"buttons",attrs:{id:"select-form"}},[s("button",{staticClass:"button",on:{click:function(t){return e.setMode("select")}}},[e._v("Suggestions")]),s("button",{staticClass:"button",on:{click:function(t){return e.setMode("manual")}}},[e._v("Catalog LookUp")])])},E=[],T={name:"select-form",props:{loggedin:Boolean,message:String,mode:String},data:function(){return{error:"",name:"",modes:[{id:"select",name:"Suggest a target"},{id:"manual",name:"Manual input"}]}},methods:{setMode:function(e){this.$emit("changemode",e)}}},N=T,$=(s("ab0e"),Object(u["a"])(N,P,E,!1,null,"251a09d3",null)),M=$.exports,I=(s("6597"),{name:"app",components:{ObservationTable:m,ObservationForm:C,LoginForm:R,SelectForm:M},data:function(){return{observations:[],proposals:[],default_proposal:"",loggedin:!1,token:void 0,user:void 0,obs:void 0,archive:void 0,message:"",success:!1,mode:"",next_obs:"",prev_obs:""}},mounted:function(){localStorage.getItem("lco_token")&&(this.token=localStorage.getItem("lco_token"),this.loggedin=!0,this.getProposals(),this.getObservations())},methods:{getObservations:function(){var e,t,s,r,a,n,o=arguments;return regeneratorRuntime.async((function(i){while(1)switch(i.prev=i.next){case 0:return e=o.length>0&&void 0!==o[0]&&o[0],t=o.length>1&&void 0!==o[1]&&o[1],i.prev=2,s={method:"GET",headers:this.authHeader()},r=this.next_obs&&e?this.next_obs:this.prev_obs&&t?this.prev_obs:"https://observe.lco.global/api/requestgroups/?user=".concat(this.user),i.next=7,regeneratorRuntime.awrap(fetch(r,s));case 7:return a=i.sent,i.next=10,regeneratorRuntime.awrap(a.json());case 10:n=i.sent,this.observations=n.results,this.next_obs=n.next,this.prev_obs=n.previous,i.next=19;break;case 16:i.prev=16,i.t0=i["catch"](2),console.log(i.t0);case 19:case"end":return i.stop()}}),null,this,[[2,16]])},deleteObservation:function(e){var t,s;return regeneratorRuntime.async((function(r){while(1)switch(r.prev=r.next){case 0:return t={method:"POST",headers:this.authHeader(),dataType:"json",contentType:"application/json"},r.prev=1,r.next=4,regeneratorRuntime.awrap(this.$http("https://observe.lco.global/api/requestgroups/".concat(e,"/cancel/"),t));case 4:s=r.sent,s&&this.getObservations(),r.next=11;break;case 8:r.prev=8,r.t0=r["catch"](1),console.error(r.t0.response);case 11:case"end":return r.stop()}}),null,this,[[1,8]])},getProposals:function(){var e,t,s;return regeneratorRuntime.async((function(r){while(1)switch(r.prev=r.next){case 0:return r.prev=0,e={method:"GET",headers:this.authHeader()},r.next=4,regeneratorRuntime.awrap(this.$http.get("https://observe.lco.global/api/profile/",e));case 4:return t=r.sent,r.next=7,regeneratorRuntime.awrap(t.data);case 7:s=r.sent,this.handleProfile(s),r.next=14;break;case 11:r.prev=11,r.t0=r["catch"](0),console.error(r.t0);case 14:case"end":return r.stop()}}),null,this,[[0,11]])},login:function(e,t){var s,r,a;return regeneratorRuntime.async((function(n){while(1)switch(n.prev=n.next){case 0:return s={method:"post",headers:{"Content-Type":"application/json"},data:{username:e,password:t},url:"https://observe.lco.global/api/api-token-auth/"},n.next=3,regeneratorRuntime.awrap(this.$http(s));case 3:return r=n.sent,n.next=6,regeneratorRuntime.awrap(r.data);case 6:if(a=n.sent,!a["token"]){n.next=16;break}return this.mode="start",this.user=e,this.loggedin=!0,this.token=a["token"],localStorage.setItem("lco_token",this.token),n.next=15,regeneratorRuntime.awrap(this.getProposals());case 15:this.getObservations();case 16:case"end":return n.stop()}}),null,this)},logout:function(){this.user=void 0,this.loggedin=!1,localStorage.removeItem("lco_token")},handleProfile:function(e){for(var t=new Array,s=0;s<e.proposals.length;s++)e.proposals[s].current&&t.push({text:e.proposals[s].title,value:e.proposals[s].id});this.archive=e.tokens.archive,this.proposals=t,1==t.length&&(this.default_proposal=t[0]),this.user=e.username},changeMode:function(e){this.mode=e},changeMessage:function(e){this.message=null},authHeader:function(){return{Authorization:"Token "+this.token}}}}),L=I,D=(s("034f"),Object(u["a"])(L,a,n,!1,null,null,null)),A=D.exports,q=s("bc3a"),G=s.n(q);s("92c6");s("d4b8"),s("c919"),r["a"].prototype.$http=G.a,r["a"].config.productionTip=!1,new r["a"]({render:function(e){return e(A)}}).$mount("#app")},"7ab1":function(e,t,s){},"85ec":function(e,t,s){},a287:function(e,t,s){},a832:function(e,t,s){"use strict";var r=s("3c4e"),a=s.n(r);a.a},ab0e:function(e,t,s){"use strict";var r=s("7ab1"),a=s.n(r);a.a},be70:function(e,t,s){},da76:function(e,t,s){"use strict";var r=s("be70"),a=s.n(r);a.a},e9fe:function(e,t,s){e.exports=s.p+"img/LCO_logo.1c7ae092.jpg"}});
//# sourceMappingURL=app.167f34e7.js.map